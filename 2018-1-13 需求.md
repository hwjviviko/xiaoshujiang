---
title: 2018-1-13 需求 
tags: 新建,模板,小书匠
grammar_cjkRuby: true
---


### 地图需求
* 首页展示方式增加项目和电梯两个选项
	* 选择按项目展示，从crm的客户-项目表中取数据
	* 选择按电梯展示，从monitor表中取电梯的gps信息展示
* 第二层增加手扶梯
	* 第二层垂直电梯只显示上行下行，所在楼层，不要开门关门
	* 手扶梯需要上行，下行，所在楼层（所在楼层不会变化）没有开关门状态
* 第三层修改
	* 更酷炫，出UE图


### CRM
* 添加产品
	* 第一次添加条目-添加产品，添加的是电梯信息，包含电梯gps信息，电梯名称，所在位置等
	* 保养时，如果需要维修，要自己创建维修合同。
	* 维修，就要在客户下创建维修合同。

* 创建产品，分类包含电梯实体，电梯配件
	* 电梯实体没有标价，在合同中体现，配件有标价


* 合同-创建合同
	* 合同类型分维修合同和保养合同
	* 合同类型如果是保养合同，添加后，自动生成保养计划
		* 保养过程中，更换配件，产生的收费，要记录下来，在保养合同下面自动添加所消耗的配件-开票，发给客户---同时在活动中生成一个维修活动，在活动下可以看到该条目，该活动状态为已完成，（要开发票，电子发票）
	* 合同类型如果是维修合同，则直接生成维修活动，在活动中可以看到。
		* 大额的维修合同，不需要在app中操作。
		* 小额的维修合同，app现场签维修合同，推送到后台。后台提供维修合同创建的接口
		* 维修电梯时，要记录电梯的政府编码。
	* 添加产品
		* 添加电梯实体和添加配件显示的字段不同
		* 添加大额配件，要自动生成维修合同
		* 添加电梯实体，保养合同才会出现，自动生成保养计划
		* 添加小额配件，推送到后台。
* 保养计划生成在项目任务中的活动
* 召修生成在活动中

### 客户创建流程
* 创建一个客户--->创建项目--->创建报价(有选择客户的选项)--->创建合同-->签保养合同---确定项目任务--->生成保养计划（项目任务下的活动）--->创建发票--->项目状态进行中--->生成保养计划--->活动中显示保养计划--->提前一天推送保养计划给维保人员的老大--->分配维保人员--->保养（app操作）--->如果有配件维修，----> 现场收款推送维修合同到后台--->在保养活动中添加一个维修条目--->在保养合同添加条目--->自动单独开发票。
* 报价单的状态为close并且accepted的时候，产品和服务在『购买的产品和服务』中才会出现

### 年度报告的生成
* 提供模板
* 保养工单，年度报告，活动

### 系统设置-工作室
* 关联关系不要动
* 建议增加层级的时候，添加新表
* 